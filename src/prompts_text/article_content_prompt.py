# src/prompts_text/article_content_prompt.py
from typing import Dict, List, Any

def create_h3_content_prompt(main_keyword: str, outline: List[Dict[str, Any]], h3_to_write: str, persona_prompt: str, style_prompt: str, current_year: int, summarized_text: str) -> str:
    """
    指定されたペルソナとライティング手法に基づき、高品質な会話形式の本文を生成するためのプロンプト。
    """
    prompt = f"""
# 指示
あなたはプロの「WEBライター」として、以下の条件に従ってブログ記事の本文を作成してください。

## 1. 記事の基本情報
- **読者ターゲット:** 「{main_keyword}」で検索しているユーザー
- **記事のスタンス:** 読者が前向きな気持ちになり、商品や情報に興味を持てるように紹介する

## 2. 今回執筆する見出し
### {h3_to_write}

## 3. 執筆の元となる参考情報
- 以下のデータベースの情報のみを、正確に使用してください。
- あなたの知識やデータベースにない情報は絶対に追加しないでください。
```json
{summarized_text}
```

## 4. 本文のルール
- **トーン＆マナー:**
  - {persona_prompt}
  - {style_prompt}
- **雰囲気:**
  - 機械音痴で少し困っている可愛い女性（お客さん）と、それに優しく丁寧に教えるイケメン店員（専門家）の会話形式で執筆してください。
  - 女性の質問や困りごとを提示し、店員がそれに答える形で、自然な会話の流れを作ってください。
- **フォーマット:**
  - 比較やリストなど、情報を整理して見せるべき箇所では、積極的にMarkdownの表や箇条書きを使用してください。
- **目的:**
  - 読者が楽しく、明るい気持ちで読み進められるように、専門用語は避け、分かりやすい言葉で解説してください。
  - 最終的に、読者が自然に商品購入や次の行動に移りたくなるように、説得力のある文章を作成してください。
- **文字数:** 400〜500文字程度でお願いします。
- **出力:** **本文のみ**を出力してください。見出しや前置きは一切不要です。

## 5. 味付け（ライティング手法）
- 以下のライティング手法の要素を、会話の中に自然に盛り込んでください。
  - **共感:** 読者の悩みや気持ちに寄り添う。「〇〇で困っていませんか？」
  - **ストーリー型:** 読者が自分自身の体験として感じられるような、変化や体験の流れを語る。
  - **論理型（PREP法）:** 「結論」→「理由」→「具体例」→「再結論」の流れで分かりやすく説明する。
  - **セールス型（PASONAの法則）:** 「問題提起」→「共感」→「解決策の提示」→「行動喚起」の流れを作る。

上記全てのルールを厳格に守り、指定されたH3見出しに対する、完璧な会話形式の本文を完成させてください。
"""
    return prompt